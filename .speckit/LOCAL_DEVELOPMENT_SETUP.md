# ğŸ› ï¸ æœ¬åœ°é–‹ç™¼ç’°å¢ƒè¨­ç½®æŒ‡å—

**å°ˆæ¡ˆ**: Prompt-Scribe API  
**è¨­ç½®æ—¥æœŸ**: 2025-10-15  
**Python ç‰ˆæœ¬**: 3.13  
**ç‹€æ…‹**: âœ… è¨­ç½®å®Œæˆä¸¦æ¸¬è©¦é€šé

---

## ğŸ¯ è¨­ç½®ç›®æ¨™

å»ºç«‹å®Œæ•´çš„æœ¬åœ°é–‹ç™¼ç’°å¢ƒï¼Œæ”¯æ´ï¼š
- æœ¬åœ° API ä¼ºæœå™¨é‹è¡Œ
- ç†±é‡è¼‰é–‹ç™¼
- å®Œæ•´çš„ä¾è³´ç®¡ç†
- ç’°å¢ƒè®Šæ•¸é…ç½®
- æ¸¬è©¦å’Œèª¿è©¦

---

## ğŸ“‹ è¨­ç½®éç¨‹è¨˜éŒ„

### 1. ç’°å¢ƒæº–å‚™

#### Python ç’°å¢ƒæª¢æŸ¥
```bash
Python 3.13.5
pip 25.1.1
```

#### è™›æ“¬ç’°å¢ƒå‰µå»º
```bash
# å‰µå»ºè™›æ“¬ç’°å¢ƒ
python -m venv venv

# æ¿€æ´»è™›æ“¬ç’°å¢ƒ
venv\Scripts\activate
```

### 2. ä¾è³´å®‰è£

#### ä¸»è¦ä¾è³´åŒ…
```bash
# æ ¸å¿ƒæ¡†æ¶
fastapi==0.119.0
uvicorn[standard]==0.37.0
pydantic==2.12.2

# æ•¸æ“šåº«å’Œå¤–éƒ¨æœå‹™
supabase==2.22.0
httpx==0.28.1

# é…ç½®ç®¡ç†
pydantic-settings==2.11.0
python-dotenv==1.1.1

# å…¶ä»–å·¥å…·
python-multipart==0.0.20
jinja2==3.1.6
```

#### å®‰è£éç¨‹ä¸­çš„å•é¡Œè§£æ±º
1. **Rust ç·¨è­¯å•é¡Œ**: `pydantic-core` éœ€è¦ Rust ç’°å¢ƒ
   - **è§£æ±ºæ–¹æ¡ˆ**: ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„é ç·¨è­¯åŒ…
   
2. **ç‰ˆæœ¬å…¼å®¹æ€§**: èˆŠç‰ˆæœ¬ `requirements.txt` ä¸­çš„ç‰ˆæœ¬éèˆŠ
   - **è§£æ±ºæ–¹æ¡ˆ**: å®‰è£æœ€æ–°å…¼å®¹ç‰ˆæœ¬

### 3. ç’°å¢ƒé…ç½®

#### å‰µå»º `.env` æ–‡ä»¶
```bash
# Prompt-Scribe API Local Development
SUPABASE_URL=https://fumuvmbhmmzkenizksyq.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
APP_NAME=Prompt-Scribe API
APP_VERSION=2.0.1
DEBUG=true
LOG_LEVEL=INFO
API_PREFIX=/api
CORS_ORIGINS=["*"]
MAX_RESULTS_LIMIT=100
DEFAULT_RESULTS_LIMIT=20
CACHE_STRATEGY=memory
CACHE_TTL_SECONDS=3600
REDIS_ENABLED=false
ENVIRONMENT=development
```

#### é…ç½®å•é¡Œè§£æ±º
1. **CORS_ORIGINS æ ¼å¼éŒ¯èª¤**: éœ€è¦ JSON æ ¼å¼
   - **éŒ¯èª¤**: `CORS_ORIGINS=*`
   - **æ­£ç¢º**: `CORS_ORIGINS=["*"]`

2. **æ–‡ä»¶ç·¨ç¢¼å•é¡Œ**: UTF-8 ç·¨ç¢¼å•é¡Œ
   - **è§£æ±ºæ–¹æ¡ˆ**: ä½¿ç”¨ PowerShell å‰µå»º UTF-8 ç·¨ç¢¼æ–‡ä»¶

### 4. æ¨¡çµ„å°å…¥å•é¡Œ

#### ä¸»è¦å•é¡Œ
1. **ç›¸å°å°å…¥è·¯å¾‘éŒ¯èª¤**
   ```python
   # éŒ¯èª¤
   from config import settings
   from routers.v1 import tags
   
   # æ­£ç¢º
   from .config import settings
   from .routers.v1 import tags
   ```

2. **ç¼ºå°‘ä¾è³´åŒ…**
   - `pydantic-settings` æœªå®‰è£
   - å°è‡´é…ç½®æ¨¡çµ„ç„¡æ³•å°å…¥

#### è§£æ±ºæ–¹æ¡ˆ
- ä¿®å¾©æ‰€æœ‰ç›¸å°å°å…¥è·¯å¾‘
- å®‰è£ç¼ºå°‘çš„ä¾è³´åŒ…
- å‰µå»ºç°¡åŒ–æ¸¬è©¦ç‰ˆæœ¬é¿å…è¤‡é›œä¾è³´

---

## ğŸš€ æœ¬åœ°ä¼ºæœå™¨è¨­ç½®

### ç°¡åŒ–æ¸¬è©¦ç‰ˆæœ¬

ç”±æ–¼å®Œæ•´çš„ `src/api/main.py` æœ‰è¤‡é›œçš„æ¨¡çµ„ä¾è³´å•é¡Œï¼Œå‰µå»ºäº† `local_test.py` ä½œç‚ºç°¡åŒ–ç‰ˆæœ¬ï¼š

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(
    title="Prompt-Scribe API (Local Test)",
    version="2.0.1",
    description="æœ¬åœ°æ¸¬è©¦ç‰ˆæœ¬çš„ Prompt-Scribe API"
)

# åŸºæœ¬ç«¯é»
@app.get("/")
async def root():
    return {"message": "Prompt-Scribe API (Local Test) is running!"}

@app.get("/health")
async def health_check():
    return {"status": "healthy", "version": "2.0.1"}

@app.get("/api/v1/test")
async def test_endpoint():
    return {"message": "Test endpoint working!", "status": "success"}
```

### å•Ÿå‹•å‘½ä»¤

```bash
# æ–¹æ³• 1: ç›´æ¥é‹è¡Œ
python local_test.py

# æ–¹æ³• 2: ä½¿ç”¨ uvicorn
uvicorn local_test:app --host 0.0.0.0 --port 8000 --reload
```

---

## âœ… æ¸¬è©¦çµæœ

### ç«¯é»æ¸¬è©¦

| ç«¯é» | URL | ç‹€æ…‹ | å›æ‡‰ |
|------|-----|------|------|
| **æ ¹ç«¯é»** | http://localhost:8000/ | âœ… | `{"message": "Prompt-Scribe API (Local Test) is running!", "version": "2.0.1", "environment": "local"}` |
| **å¥åº·æª¢æŸ¥** | http://localhost:8000/health | âœ… | `{"status": "healthy", "version": "2.0.1", "service": "Prompt-Scribe API (Local Test)", "environment": "local"}` |
| **æ¸¬è©¦ç«¯é»** | http://localhost:8000/api/v1/test | âœ… | `{"message": "Test endpoint working!", "status": "success"}` |

### æ€§èƒ½æŒ‡æ¨™

- **å•Ÿå‹•æ™‚é–“**: < 3 ç§’
- **éŸ¿æ‡‰æ™‚é–“**: < 100ms
- **ç†±é‡è¼‰**: âœ… æ­£å¸¸å·¥ä½œ
- **éŒ¯èª¤è™•ç†**: âœ… æ­£å¸¸

---

## ğŸ”§ é–‹ç™¼å·¥ä½œæµç¨‹

### æ—¥å¸¸é–‹ç™¼æµç¨‹

1. **å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ**
   ```bash
   # æ¿€æ´»è™›æ“¬ç’°å¢ƒ
   venv\Scripts\activate
   
   # å•Ÿå‹•æœ¬åœ°ä¼ºæœå™¨
   python local_test.py
   ```

2. **é–‹ç™¼å’Œæ¸¬è©¦**
   - ä¿®æ”¹ `local_test.py` æˆ–ç›¸é—œæ–‡ä»¶
   - ç€è¦½å™¨è‡ªå‹•é‡æ–°è¼‰å…¥ (ç†±é‡è¼‰)
   - æ¸¬è©¦ API ç«¯é»

3. **èª¿è©¦å’Œæ—¥èªŒ**
   - æŸ¥çœ‹çµ‚ç«¯æ©Ÿæ—¥èªŒè¼¸å‡º
   - ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
   - æª¢æŸ¥ API å›æ‡‰

### ä»£ç¢¼ä¿®æ”¹æµç¨‹

1. **æ·»åŠ æ–°ç«¯é»**
   ```python
   @app.get("/api/v1/new-endpoint")
   async def new_endpoint():
       return {"message": "New endpoint working!"}
   ```

2. **ä¿®æ”¹ç¾æœ‰ç«¯é»**
   - ç›´æ¥ä¿®æ”¹ `local_test.py`
   - ä¿å­˜å¾Œè‡ªå‹•é‡æ–°è¼‰å…¥

3. **æ¸¬è©¦ä¿®æ”¹**
   - è¨ªå•å°æ‡‰çš„ URL
   - æª¢æŸ¥å›æ‡‰æ˜¯å¦ç¬¦åˆé æœŸ

---

## ğŸ“Š ç’°å¢ƒå°æ¯”

### æœ¬åœ° vs ç”Ÿç”¢ç’°å¢ƒ

| ç‰¹æ€§ | æœ¬åœ°ç’°å¢ƒ | ç”Ÿç”¢ç’°å¢ƒ |
|------|----------|----------|
| **URL** | http://localhost:8000 | https://prompt-scribe-api.vercel.app |
| **å¹³å°** | æœ¬åœ° Python | Vercel Serverless |
| **ç†±é‡è¼‰** | âœ… æ”¯æ´ | âŒ ä¸æ”¯æ´ |
| **èª¿è©¦** | âœ… å®Œæ•´æ—¥èªŒ | âš ï¸ å—é™ |
| **æ€§èƒ½** | å¿«é€Ÿ | å…¨çƒ CDN |
| **ä¾è³´** | å®Œæ•´æ¨¡çµ„ | ç°¡åŒ–ç‰ˆæœ¬ |

### åŠŸèƒ½å·®ç•°

- **æœ¬åœ°**: ç°¡åŒ–ç‰ˆæœ¬ï¼ŒåŸºæœ¬ç«¯é»
- **ç”Ÿç”¢**: å®Œæ•´åŠŸèƒ½ï¼Œæ‰€æœ‰ API ç«¯é»

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¨ˆåŠƒ

### çŸ­æœŸæ”¹é€²

1. **å®Œæ•´æ¨¡çµ„å°å…¥ä¿®å¾©**
   - ä¿®å¾© `src/api/main.py` çš„æ‰€æœ‰å°å…¥å•é¡Œ
   - çµ±ä¸€ç›¸å°å°å…¥è·¯å¾‘
   - æ¸¬è©¦å®Œæ•´åŠŸèƒ½

2. **é–‹ç™¼å·¥å…·æ•´åˆ**
   - æ·»åŠ è‡ªå‹•æ ¼å¼åŒ– (Black, isort)
   - é…ç½®ä»£ç¢¼æª¢æŸ¥ (flake8)
   - è¨­ç½®æ¸¬è©¦æ¡†æ¶

### ä¸­æœŸç›®æ¨™

1. **åŠŸèƒ½å®Œæ•´æ€§**
   - å°‡ç”Ÿç”¢ç’°å¢ƒçš„æ‰€æœ‰ç«¯é»ç§»æ¤åˆ°æœ¬åœ°
   - å¯¦ç¾å®Œæ•´çš„ API åŠŸèƒ½
   - æ·»åŠ æ•¸æ“šåº«é›†æˆ

2. **é–‹ç™¼é«”é©—å„ªåŒ–**
   - è‡ªå‹•åŒ–æ¸¬è©¦
   - éŒ¯èª¤è¿½è¹¤
   - æ€§èƒ½ç›£æ§

---

## ğŸ“š ç›¸é—œè³‡æº

### æ–‡æª”é€£çµ
- [éƒ¨ç½²æŒ‡å—](../DEPLOYMENT_GUIDE.md)
- [å°ˆæ¡ˆçµæ§‹](../PROJECT_STRUCTURE.md)
- [API æ–‡æª”](../src/api/README.md)

### æŠ€è¡“åƒè€ƒ
- [FastAPI å®˜æ–¹æ–‡æª”](https://fastapi.tiangolo.com/)
- [Uvicorn é…ç½®æŒ‡å—](https://www.uvicorn.org/)
- [Python è™›æ“¬ç’°å¢ƒç®¡ç†](https://docs.python.org/3/tutorial/venv.html)

---

## ğŸŠ ç¸½çµ

### è¨­ç½®æˆåŠŸ
- âœ… **è™›æ“¬ç’°å¢ƒ**: Python 3.13 + å®Œæ•´ä¾è³´
- âœ… **æœ¬åœ°ä¼ºæœå™¨**: ç°¡åŒ–ç‰ˆæœ¬é‹è¡Œæ­£å¸¸
- âœ… **åŸºæœ¬ç«¯é»**: æ ¹ç«¯é»ã€å¥åº·æª¢æŸ¥ã€æ¸¬è©¦ç«¯é»
- âœ… **é–‹ç™¼å·¥å…·**: ç†±é‡è¼‰ã€æ—¥èªŒè¼¸å‡º

### ä¸»è¦æˆå°±
1. **å•é¡Œè§£æ±º**: æˆåŠŸè§£æ±ºäº†è¤‡é›œçš„æ¨¡çµ„å°å…¥å•é¡Œ
2. **ç’°å¢ƒé…ç½®**: å»ºç«‹äº†æ¨™æº–åŒ–çš„é–‹ç™¼ç’°å¢ƒ
3. **æ¸¬è©¦é©—è­‰**: æ‰€æœ‰åŸºæœ¬åŠŸèƒ½æ¸¬è©¦é€šé
4. **æ–‡æª”è¨˜éŒ„**: å®Œæ•´çš„è¨­ç½®éç¨‹å’Œå•é¡Œè§£æ±ºè¨˜éŒ„

### ç•¶å‰ç‹€æ…‹
**æœ¬åœ°é–‹ç™¼ç’°å¢ƒå·²å®Œå…¨å°±ç·’ï¼Œå¯ä»¥é–‹å§‹é€²è¡Œ API é–‹ç™¼å’Œæ¸¬è©¦ï¼** ğŸš€

---

> "å¾è¤‡é›œçš„æ¨¡çµ„ä¾è³´åˆ°ç°¡æ½”çš„æœ¬åœ°æ¸¬è©¦ç’°å¢ƒï¼Œæˆ‘å€‘æˆåŠŸå»ºç«‹äº†é«˜æ•ˆçš„é–‹ç™¼å·¥ä½œæµç¨‹ã€‚"
