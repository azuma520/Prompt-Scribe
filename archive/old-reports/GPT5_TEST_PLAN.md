# GPT-5 Mini æ¸¬è©¦è¨ˆåŠƒ

## ğŸ¯ æ¸¬è©¦ç›®æ¨™

é©—è­‰ GPT-5 Mini é›†æˆæ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œç¢ºä¿èƒ½å¤ ç‚º Danbooru æ¨™ç±¤æ¨è–¦ä»»å‹™æä¾›é«˜è³ªé‡çš„çµæœã€‚

---

## ğŸ“‹ æ¸¬è©¦éšæ®µ

### éšæ®µ 1: ç’°å¢ƒé©—è­‰ âœ…

**ç›®çš„**: ç¢ºèªç’°å¢ƒè®Šæ•¸å’Œ API Key æ­£ç¢ºè¨­ç½®

**æ­¥é©Ÿ**:
```powershell
# 1. è¨­ç½®ç’°å¢ƒè®Šæ•¸
powershell -ExecutionPolicy Bypass -File setup_env_local.ps1

# 2. é‹è¡Œè¨ºæ–·å·¥å…·
python diagnose_model.py
```

**é æœŸçµæœ**:
```
âœ… API Key å·²è¨­ç½®
âœ… æ¨¡å‹: gpt-5-mini
âœ… åŠŸèƒ½å•Ÿç”¨: æ˜¯
âœ… OpenAI å®¢æˆ¶ç«¯: å·²åˆå§‹åŒ–
âœ… å¯ç”¨æ€§: å¯ç”¨
```

---

### éšæ®µ 2: æ¨¡å‹é€£æ¥æ¸¬è©¦ ğŸ”„

**ç›®çš„**: é©—è­‰èƒ½å¦æˆåŠŸé€£æ¥ GPT-5 Mini ä¸¦ç²å¾—å›æ‡‰

**æ­¥é©Ÿ**:
```powershell
# é‹è¡Œé€£æ¥æ¸¬è©¦
python -c "from src.api.services.gpt5_nano_client import GPT5NanoClient; import asyncio; client = GPT5NanoClient(); print(asyncio.run(client.test_connection()))"
```

**é æœŸçµæœ**:
- HTTP 200 OK
- å›æ‡‰å…§å®¹ä¸ç‚ºç©º
- Token ä½¿ç”¨æ­£å¸¸
- æˆæœ¬è¨ˆç®—æ­£ç¢º

**æª¢æŸ¥é»**:
- [ ] API èª¿ç”¨æˆåŠŸ
- [ ] å›æ‡‰åŒ…å«æœ‰æ•ˆçš„ JSON
- [ ] `reasoning_effort` å’Œ `verbosity` åƒæ•¸è¢«æ­£ç¢ºä½¿ç”¨
- [ ] æ²’æœ‰ `temperature` åƒæ•¸éŒ¯èª¤

---

### éšæ®µ 3: æ¨™ç±¤æ¨è–¦åŠŸèƒ½æ¸¬è©¦ ğŸ·ï¸

**ç›®çš„**: é©—è­‰å¯¦éš›çš„æ¨™ç±¤æ¨è–¦åŠŸèƒ½

#### æ¸¬è©¦æ¡ˆä¾‹ 1: ç°¡å–®æè¿°

**è¼¸å…¥**:
```
"ä¸€å€‹é•·é«®è—çœ¼çš„å‹•æ¼«å¥³å­©"
```

**é æœŸè¼¸å‡º**:
```json
{
  "tags": ["1girl", "long_hair", "blue_eyes", "solo", "anime_style"],
  "confidence": 0.85,
  "reasoning": "Based on the description, these tags capture the key visual elements",
  "categories": ["CHARACTER", "APPEARANCE", "STYLE"]
}
```

**æª¢æŸ¥é»**:
- [ ] è¿”å› 5-10 å€‹æ¨™ç±¤
- [ ] æ¨™ç±¤æ ¼å¼æ­£ç¢ºï¼ˆä½¿ç”¨ä¸‹åŠƒç·šï¼‰
- [ ] Confidence åœ¨ 0.6-0.95 ç¯„åœå…§
- [ ] JSON æ ¼å¼æœ‰æ•ˆ

#### æ¸¬è©¦æ¡ˆä¾‹ 2: è¤‡é›œå ´æ™¯

**è¼¸å…¥**:
```
"æˆ¶å¤–å ´æ™¯ï¼Œæ—¥è½ï¼ŒåŸå¸‚é¢¨æ™¯ï¼Œä¸€å€‹ç©¿æ ¡æœçš„å¥³å­©ç«™åœ¨å¤©å°ä¸Š"
```

**é æœŸè¼¸å‡º**:
```json
{
  "tags": ["1girl", "school_uniform", "outdoors", "sunset", "cityscape", "rooftop", "standing", "sky"],
  "confidence": 0.88,
  "reasoning": "Scene includes character, clothing, location, time of day, and action",
  "categories": ["CHARACTER", "CLOTHING", "SCENE", "ACTION"]
}
```

**æª¢æŸ¥é»**:
- [ ] åŒ…å«å ´æ™¯æ¨™ç±¤ï¼ˆoutdoors, sunset, cityscapeï¼‰
- [ ] åŒ…å«æœè£æ¨™ç±¤ï¼ˆschool_uniformï¼‰
- [ ] åŒ…å«å‹•ä½œæ¨™ç±¤ï¼ˆstandingï¼‰
- [ ] åˆ†é¡æ­£ç¢º

#### æ¸¬è©¦æ¡ˆä¾‹ 3: è—è¡“é¢¨æ ¼

**è¼¸å…¥**:
```
"masterpiece, high quality, detailed artwork"
```

**é æœŸè¼¸å‡º**:
```json
{
  "tags": ["masterpiece", "high_quality", "highly_detailed", "best_quality", "absurdres"],
  "confidence": 0.90,
  "reasoning": "Quality and detail modifiers for high-quality artwork",
  "categories": ["STYLE", "QUALITY"]
}
```

**æª¢æŸ¥é»**:
- [ ] è­˜åˆ¥è³ªé‡æ¨™ç±¤
- [ ] æ­£ç¢ºçš„è—è¡“é¢¨æ ¼æ¨™ç±¤
- [ ] é«˜ä¿¡å¿ƒåº¦

---

### éšæ®µ 4: æ€§èƒ½æ¸¬è©¦ âš¡

**ç›®çš„**: è©•ä¼°å›æ‡‰æ™‚é–“å’Œæˆæœ¬

**æ¸¬è©¦**:
```powershell
# é‹è¡Œæ€§èƒ½æ¸¬è©¦
python test_gpt5_performance.py
```

**æ¸¬é‡æŒ‡æ¨™**:
- å¹³å‡å›æ‡‰æ™‚é–“: ç›®æ¨™ < 3 ç§’
- Token ä½¿ç”¨é‡: ç›®æ¨™ < 1000 tokens/è«‹æ±‚
- æˆæœ¬: ç›®æ¨™ < $0.001/è«‹æ±‚

**æª¢æŸ¥é»**:
- [ ] å›æ‡‰æ™‚é–“å¯æ¥å—
- [ ] Token ä½¿ç”¨åœ¨åˆç†ç¯„åœ
- [ ] æˆæœ¬è¨ˆç®—æ­£ç¢º

---

### éšæ®µ 5: éŒ¯èª¤è™•ç†æ¸¬è©¦ ğŸ›¡ï¸

**ç›®çš„**: é©—è­‰éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

#### æ¸¬è©¦æ¡ˆä¾‹ 1: API Key ç„¡æ•ˆ

**æ“ä½œ**: ä½¿ç”¨ç„¡æ•ˆçš„ API Key
**é æœŸ**: è¿”å›é™ç´šæ–¹æ¡ˆï¼ˆkeyword matchingï¼‰

#### æ¸¬è©¦æ¡ˆä¾‹ 2: ç¶²è·¯éŒ¯èª¤

**æ“ä½œ**: æ¨¡æ“¬ç¶²è·¯ä¸­æ–·
**é æœŸ**: é©ç•¶çš„éŒ¯èª¤è¨Šæ¯å’Œé™ç´šè™•ç†

#### æ¸¬è©¦æ¡ˆä¾‹ 3: å›æ‡‰æ ¼å¼éŒ¯èª¤

**æ“ä½œ**: å¦‚æœ LLM è¿”å›ç„¡æ•ˆ JSON
**é æœŸ**: JSON é©—è­‰å¤±æ•—ï¼Œè¨˜éŒ„éŒ¯èª¤ï¼Œè¿”å›é™ç´šæ–¹æ¡ˆ

---

### éšæ®µ 6: é›†æˆæ¸¬è©¦ ğŸ”—

**ç›®çš„**: æ¸¬è©¦èˆ‡å®Œæ•´ API çš„é›†æˆ

**æ­¥é©Ÿ**:
```powershell
# 1. å•Ÿå‹•ä¼ºæœå™¨
python run_server.py

# 2. æ¸¬è©¦ API ç«¯é»
python test_api.py
```

**API æ¸¬è©¦æ¡ˆä¾‹**:

#### 1. Health Check
```bash
curl http://127.0.0.1:8000/health
```

#### 2. OpenAI Config Test
```bash
curl http://127.0.0.1:8000/api/llm/test-openai-config
```

#### 3. Tag Recommendation
```bash
curl -X POST http://127.0.0.1:8000/api/llm/recommend-tags \
  -H "Content-Type: application/json" \
  -d '{
    "description": "ä¸€å€‹é•·é«®è—çœ¼çš„å‹•æ¼«å¥³å­©",
    "use_llm": true
  }'
```

**æª¢æŸ¥é»**:
- [ ] Health endpoint è¿”å› 200
- [ ] Config test é¡¯ç¤º GPT-5 Mini
- [ ] Tag recommendation è¿”å›æœ‰æ•ˆçµæœ
- [ ] å›æ‡‰æ™‚é–“ < 5 ç§’

---

## ğŸ“Š æˆåŠŸæ¨™æº–

### å¿…é ˆé€šé (Critical)

- âœ… ç’°å¢ƒè®Šæ•¸æ­£ç¢ºè¨­ç½®
- âœ… API Key æœ‰æ•ˆä¸”æœ‰ GPT-5 æ¬Šé™
- âœ… æ¨¡å‹é€£æ¥æˆåŠŸ
- âœ… èƒ½è¿”å›æœ‰æ•ˆçš„ JSON çµæ§‹
- âœ… æ¨™ç±¤æ ¼å¼ç¬¦åˆ Danbooru è¦ç¯„

### æ‡‰è©²é€šé (Important)

- âœ… å¹³å‡å›æ‡‰æ™‚é–“ < 3 ç§’
- âœ… JSON é©—è­‰æˆåŠŸç‡ > 95%
- âœ… æ¨™ç±¤è³ªé‡é«˜ï¼ˆç›¸é—œæ€§å¼·ï¼‰
- âœ… éŒ¯èª¤è™•ç†æ­£å¸¸

### å¸Œæœ›é”æˆ (Nice to Have)

- âœ… å›æ‡‰æ™‚é–“ < 2 ç§’
- âœ… JSON é©—è­‰æˆåŠŸç‡ = 100%
- âœ… æˆæœ¬ < $0.0005/è«‹æ±‚

---

## ğŸ› å•é¡Œæ’æŸ¥

### å•é¡Œ 1: "temperature åƒæ•¸ä¸æ”¯æŒ" éŒ¯èª¤

**åŸå› **: GPT-5 ä¸æ”¯æŒ temperature
**è§£æ±º**: å·²åœ¨ä»£ç¢¼ä¸­ä¿®å¾©ï¼Œä½¿ç”¨ reasoning_effort å’Œ verbosity

### å•é¡Œ 2: å›æ‡‰ç‚ºç©º

**æª¢æŸ¥**:
1. API Key æ˜¯å¦æœ‰æ•ˆ
2. æ¨¡å‹åç¨±æ˜¯å¦æ­£ç¢ºï¼ˆgpt-5-miniï¼‰
3. æ˜¯å¦ä½¿ç”¨äº†æ­£ç¢ºçš„åƒæ•¸

### å•é¡Œ 3: JSON è§£æå¤±æ•—

**æª¢æŸ¥**:
1. Prompt æ˜¯å¦æ˜ç¢ºè¦æ±‚ JSON æ ¼å¼
2. verbosity è¨­ç½®æ˜¯å¦ç‚º "low"
3. æŸ¥çœ‹åŸå§‹å›æ‡‰å…§å®¹

---

## ğŸ“ æ¸¬è©¦è¨˜éŒ„

### æ¸¬è©¦æ—¥æœŸ: ____________________

| æ¸¬è©¦éšæ®µ | ç‹€æ…‹ | è¨»è¨˜ |
|---------|------|------|
| ç’°å¢ƒé©—è­‰ | â¬œ é€šé / â¬œ å¤±æ•— | |
| æ¨¡å‹é€£æ¥ | â¬œ é€šé / â¬œ å¤±æ•— | |
| æ¨™ç±¤æ¨è–¦ | â¬œ é€šé / â¬œ å¤±æ•— | |
| æ€§èƒ½æ¸¬è©¦ | â¬œ é€šé / â¬œ å¤±æ•— | |
| éŒ¯èª¤è™•ç† | â¬œ é€šé / â¬œ å¤±æ•— | |
| é›†æˆæ¸¬è©¦ | â¬œ é€šé / â¬œ å¤±æ•— | |

### ç¸½é«”è©•ä¼°

- â¬œ **é€šé** - å¯ä»¥éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ
- â¬œ **æœ‰æ¢ä»¶é€šé** - éœ€è¦å°ä¿®æ­£
- â¬œ **æœªé€šé** - éœ€è¦é‡å¤§ä¿®æ­£

### å‚™è¨»:

```
[åœ¨æ­¤è¨˜éŒ„æ¸¬è©¦éç¨‹ä¸­çš„ä»»ä½•å•é¡Œæˆ–è§€å¯Ÿ]
```

---

**æ¸¬è©¦è€…**: ____________________
**æ—¥æœŸ**: ____________________
**ç‰ˆæœ¬**: GPT-5 Mini Integration v1.0
