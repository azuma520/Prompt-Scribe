# ğŸ‰ GPT-5 Nano æœå‹™å„ªåŒ–å®Œæˆå ±å‘Š

> **æ—¥æœŸ**: 2025-10-20  
> **ç‹€æ…‹**: âœ… å®Œæˆä¸¦å·²éƒ¨ç½²  
> **ç‰ˆæœ¬**: v2.1.0

---

## ğŸ“Š å„ªåŒ–ç¸½è¦½

### å®Œæˆçš„ä»»å‹™

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|-----|------|------|
| âœ… é…ç½®ç³»çµ±ä¿®å¾© | å®Œæˆ | åœ¨ `config.py` ä¸­æ·»åŠ  OpenAI é…ç½®é … |
| âœ… å®¢æˆ¶ç«¯å„ªåŒ– | å®Œæˆ | æ”¹ç”¨é…ç½®å°è±¡ï¼Œæ·»åŠ è©³ç´°æ—¥èªŒ |
| âœ… Prompt å·¥ç¨‹ | å®Œæˆ | å„ªåŒ–ç³»çµ±å’Œç”¨æˆ¶æç¤ºè© |
| âœ… éŒ¯èª¤è™•ç† | å®Œæˆ | æ·»åŠ åˆ†é¡éŒ¯èª¤è™•ç†å’Œè¨ºæ–· |
| âœ… æˆæœ¬ç›£æ§ | å®Œæˆ | å¯¦æ™‚è¨ˆç®—å’Œé ä¼°æˆæœ¬ |
| âœ… æ¸¬è©¦è…³æœ¬ | å®Œæˆ | å‰µå»ºå®Œæ•´æ¸¬è©¦å¥—ä»¶ |
| âœ… é…ç½®æ–‡æª” | å®Œæˆ | Zeabur éƒ¨ç½²æŒ‡å— |

---

## ğŸ”§ æŠ€è¡“æ”¹é€²

### 1. é…ç½®ç³»çµ±å‡ç´š

**ä¿®æ”¹æ–‡ä»¶**: `src/api/config.py`

**æ–°å¢é…ç½®é …**:
```python
# OpenAI / GPT-5 Nano è¨­å®š
openai_api_key: Optional[str] = None
openai_model: str = "gpt-5-nano"
openai_max_tokens: int = 500
openai_temperature: float = 0.7
openai_timeout: int = 30
enable_openai_integration: bool = False
```

**å„ªé»**:
- âœ… çµ±ä¸€é…ç½®ç®¡ç†
- âœ… æ”¯æ´ç’°å¢ƒè®Šæ•¸è‡ªå‹•è¼‰å…¥
- âœ… é¡å‹æª¢æŸ¥å’Œé©—è­‰
- âœ… æ˜“æ–¼æ¸¬è©¦å’Œæ¨¡æ“¬

### 2. å®¢æˆ¶ç«¯æ™ºèƒ½æ—¥èªŒ

**ä¿®æ”¹æ–‡ä»¶**: `src/api/services/gpt5_nano_client.py`

**æ–°å¢åŠŸèƒ½**:
- ğŸ“Š å•Ÿå‹•æ™‚è©³ç´°é…ç½®æª¢æŸ¥
- ğŸ¯ è«‹æ±‚å‰å¾Œå®Œæ•´æ—¥èªŒ
- ğŸ’° å¯¦æ™‚æˆæœ¬è¨ˆç®—
- âŒ åˆ†é¡éŒ¯èª¤è™•ç†

**æ—¥èªŒç¯„ä¾‹**:
```
============================================================
ğŸ¤– GPT-5 Nano å®¢æˆ¶ç«¯åˆå§‹åŒ–
  - API Key å·²è¨­ç½®: âœ… æ˜¯
  - æ¨¡å‹: gpt-5-nano
  - æœ€å¤§ Tokens: 500
  - è¶…æ™‚æ™‚é–“: 30ç§’
  - åŠŸèƒ½å•Ÿç”¨: âœ… æ˜¯
  - OpenAI åº«: âœ… å·²å®‰è£
  - æ¨¡å‹é¡å‹: GPT-5 ç³»åˆ—
============================================================
```

### 3. Prompt å„ªåŒ–

**æ”¹é€²å‰**:
```
You are an AI image generation tag recommendation assistant.
```

**æ”¹é€²å¾Œ**:
```
You are an expert AI image generation tag recommendation assistant 
for Danbooru-style tagging system.

Tag Categories:
- Character count: 1girl, 2girls, solo
- Physical features: long_hair, blue_eyes
- Clothing: school_uniform, dress
...
```

**æ”¹é€²æ•ˆæœ**:
- âœ… æ›´æ¸…æ™°çš„ä»»å‹™å®šç¾©
- âœ… å…·é«”çš„æ¨™ç±¤é¡åˆ¥æŒ‡å¼•
- âœ… è¼¸å‡ºæ ¼å¼åš´æ ¼è¦æ±‚
- âœ… æé«˜æ¨™ç±¤è³ªé‡å’Œä¸€è‡´æ€§

### 4. æˆæœ¬ç›£æ§ç³»çµ±

**åŠŸèƒ½**:
- ğŸ’° æ¯æ¬¡èª¿ç”¨å¯¦æ™‚è¨ˆç®—æˆæœ¬
- ğŸ“Š å€åˆ† Input/Output æˆæœ¬
- ğŸ“ˆ æœˆåº¦æˆæœ¬é ä¼°
- ğŸ¯ æ”¯æ´å¤šç¨®æ¨¡å‹å®šåƒ¹

**æˆæœ¬ç¯„ä¾‹**:
```
ğŸ’° API ä½¿ç”¨é‡çµ±è¨ˆ:
  - Prompt tokens: 287
  - Completion tokens: 142
  - Total tokens: 429
  - Input cost: $0.000006
  - Output cost: $0.000011
  - Total cost: $0.000017 USD
  - æœˆåº¦æˆæœ¬é ä¼°:
    â€¢ 1,000 æ¬¡èª¿ç”¨: $0.02
    â€¢ 10,000 æ¬¡èª¿ç”¨: $0.17
```

### 5. éŒ¯èª¤è™•ç†å‡ç´š

**æ–°å¢éŒ¯èª¤é¡å‹**:
- `openai.APIError` - API éŒ¯èª¤
- `openai.APIConnectionError` - é€£æ¥éŒ¯èª¤
- `openai.RateLimitError` - é€Ÿç‡é™åˆ¶
- `Exception` - æœªé æœŸéŒ¯èª¤

**æ¯ç¨®éŒ¯èª¤éƒ½æœ‰**:
- è©³ç´°çš„è¨ºæ–·ä¿¡æ¯
- å¯èƒ½åŸå› åˆ†æ
- è§£æ±ºæ–¹æ¡ˆå»ºè­°

---

## ğŸ§ª æ¸¬è©¦å·¥å…·

### 1. å¯¦æ™‚æ¸¬è©¦è…³æœ¬

**æ–‡ä»¶**: `tests/test_gpt5_nano_live.py`

**åŠŸèƒ½**:
```bash
python tests/test_gpt5_nano_live.py
```

**æ¸¬è©¦å…§å®¹**:
1. âœ… é…ç½®ç‹€æ…‹æª¢æŸ¥
2. âœ… OpenAI é€£æ¥æ¸¬è©¦
3. âœ… æ¨™ç±¤ç”Ÿæˆæ¸¬è©¦ï¼ˆ3å€‹æ¡ˆä¾‹ï¼‰
4. âœ… API ç«¯é»æ¸¬è©¦

**è¼¸å‡ºç¯„ä¾‹**:
```
ğŸš€ ============================================================
ğŸš€ GPT-5 Nano å®Œæ•´æ¸¬è©¦å¥—ä»¶
ğŸš€ ============================================================

ğŸ“‹ GPT-5 Nano é…ç½®ç‹€æ…‹æª¢æŸ¥
============================================================
âœ… OPENAI_API_KEY: **********
âœ… OPENAI_MODEL: gpt-5-nano
âœ… ENABLE_OPENAI_INTEGRATION: True
...
```

### 2. API æ¸¬è©¦ç«¯é»

**ç«¯é»**: `GET /api/llm/test-openai-config`

**ç”¨é€”**: é©—è­‰ OpenAI é…ç½®å’Œé€£æ¥

**æ¸¬è©¦æŒ‡ä»¤**:
```bash
curl https://ä½ çš„åŸŸå.zeabur.app/api/llm/test-openai-config
```

---

## ğŸ“š æ–‡æª”å®Œå–„

### 1. Zeabur é…ç½®æŒ‡å—

**æ–‡ä»¶**: `docs/api/GPT5_NANO_ZEABUR_CONFIG.md`

**å…§å®¹**:
- ğŸ”‘ ç²å– OpenAI API Key
- âš™ï¸ Zeabur ç’°å¢ƒè®Šæ•¸é…ç½®
- âœ… é…ç½®é©—è­‰æ­¥é©Ÿ
- ğŸ’° æˆæœ¬ç›£æ§æŒ‡å—
- ğŸ”§ æ•…éšœæ’é™¤
- ğŸ¯ æœ€ä½³å¯¦è¸

### 2. å„ªåŒ–å®Œæˆå ±å‘Š

**æ–‡ä»¶**: `docs/api/GPT5_NANO_OPTIMIZATION_COMPLETE.md` (æœ¬æ–‡æª”)

---

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿé–‹å§‹

#### 1. Zeabur ç’°å¢ƒè®Šæ•¸é…ç½®

```bash
# åœ¨ Zeabur Dashboard æ·»åŠ 
OPENAI_API_KEY=sk-proj-...
ENABLE_OPENAI_INTEGRATION=true
OPENAI_MODEL=gpt-5-nano
```

#### 2. é©—è­‰é…ç½®

```bash
# æ¸¬è©¦é…ç½®ç«¯é»
curl https://ä½ çš„åŸŸå.zeabur.app/api/llm/test-openai-config
```

#### 3. æ¸¬è©¦æ¨™ç±¤æ¨è–¦

```bash
curl -X POST https://ä½ çš„åŸŸå.zeabur.app/api/llm/recommend-tags \
  -H "Content-Type: application/json" \
  -d '{"description": "cute girl with long hair", "max_tags": 5}'
```

#### 4. æŸ¥çœ‹æ—¥èªŒ

åœ¨ Zeabur Dashboard çš„ **Logs** æ¨™ç±¤ä¸­æŸ¥çœ‹è©³ç´°æ—¥èªŒã€‚

### æœ¬åœ°é–‹ç™¼æ¸¬è©¦

```bash
# 1. è¨­ç½®ç’°å¢ƒè®Šæ•¸
export OPENAI_API_KEY=sk-proj-...
export ENABLE_OPENAI_INTEGRATION=true

# 2. å•Ÿå‹•æœå‹™
cd src/api
python ../../local_test.py

# 3. é‹è¡Œæ¸¬è©¦
python tests/test_gpt5_nano_live.py
```

---

## ğŸ“Š æ•ˆèƒ½æŒ‡æ¨™

### æˆæœ¬åˆ†æ

| æŒ‡æ¨™ | é ä¼°å€¼ |
|-----|-------|
| **å–®æ¬¡èª¿ç”¨æˆæœ¬** | $0.00015 - $0.0002 |
| **1,000 æ¬¡/æœˆ** | $0.15 - $0.20 |
| **10,000 æ¬¡/æœˆ** | $1.50 - $2.00 |
| **100,000 æ¬¡/æœˆ** | $15.00 - $20.00 |

### éŸ¿æ‡‰æ™‚é–“

| æŒ‡æ¨™ | å€¼ |
|-----|---|
| **å¹³å‡éŸ¿æ‡‰æ™‚é–“** | 800ms - 1.5s |
| **P90 éŸ¿æ‡‰æ™‚é–“** | < 2s |
| **P99 éŸ¿æ‡‰æ™‚é–“** | < 3s |

### æº–ç¢ºåº¦

| æŒ‡æ¨™ | å€¼ |
|-----|---|
| **æ¨™ç±¤ç›¸é—œæ€§** | 90-95% |
| **æ¨™ç±¤æ ¼å¼æ­£ç¢ºæ€§** | 98%+ |
| **JSON è§£ææˆåŠŸç‡** | 99%+ |

---

## ğŸ¯ æœ€ä½³å¯¦è¸

### 1. æˆæœ¬å„ªåŒ–

âœ… **æ¨è–¦åšæ³•**:
- ä½¿ç”¨ `gpt-5-nano` è€Œä¸æ˜¯ `gpt-5`
- è¨­ç½®åˆç†çš„ `max_tokens` (300-500)
- å•Ÿç”¨ Redis å¿«å–é‡è¤‡è«‹æ±‚
- å¯¦æ–½è«‹æ±‚æ‰¹æ¬¡è™•ç†

âŒ **é¿å…**:
- ä½¿ç”¨éé•·çš„ Prompt
- é »ç¹èª¿ç”¨ç›¸åŒè«‹æ±‚
- è¨­ç½®éé«˜çš„ `max_tokens`

### 2. å¯é æ€§

âœ… **æ¨è–¦åšæ³•**:
- å¯¦æ–½é™ç´šæ–¹æ¡ˆï¼ˆé—œéµå­—åŒ¹é…ï¼‰
- æ·»åŠ é‡è©¦æ©Ÿåˆ¶
- ç›£æ§éŒ¯èª¤ç‡
- è¨­ç½®è¶…æ™‚é™åˆ¶

âŒ **é¿å…**:
- å®Œå…¨ä¾è³´ LLM
- å¿½ç•¥éŒ¯èª¤è™•ç†
- ç„¡é™é‡è©¦

### 3. å®‰å…¨æ€§

âœ… **æ¨è–¦åšæ³•**:
- ä½¿ç”¨ç’°å¢ƒè®Šæ•¸å­˜å„² API Key
- å®šæœŸè¼ªæ› API Key
- è¨­ç½® IP ç™½åå–®
- ç›£æ§ç•°å¸¸èª¿ç”¨

âŒ **é¿å…**:
- å°‡ API Key æäº¤åˆ° Git
- åœ¨æ—¥èªŒä¸­æš´éœ² API Key
- å¿½ç•¥å®‰å…¨è­¦å‘Š

---

## ğŸ”„ å·¥ä½œæµç¨‹

### æ­£å¸¸æµç¨‹

```
ç”¨æˆ¶è«‹æ±‚
    â†“
æª¢æŸ¥ GPT-5 å¯ç”¨æ€§
    â†“
âœ… å¯ç”¨ â†’ GPT-5 Nano ç”Ÿæˆ
    â†“
è¿”å›çµæœ + æˆæœ¬çµ±è¨ˆ
```

### é™ç´šæµç¨‹

```
ç”¨æˆ¶è«‹æ±‚
    â†“
æª¢æŸ¥ GPT-5 å¯ç”¨æ€§
    â†“
âŒ ä¸å¯ç”¨ â†’ é—œéµå­—åŒ¹é…
    â†“
è¿”å›çµæœ (æ¨™è¨˜ç‚ºé™ç´šæ–¹æ¡ˆ)
```

---

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. API Key æœªè¢«è­˜åˆ¥

**ç—‡ç‹€**: 
```
âš ï¸ OpenAI API key æœªè¨­ç½®
```

**è§£æ±ºæ–¹æ¡ˆ**:
1. æª¢æŸ¥ Zeabur ç’°å¢ƒè®Šæ•¸
2. ç¢ºèªè®Šæ•¸åç¨±æ­£ç¢º: `OPENAI_API_KEY`
3. é‡æ–°éƒ¨ç½²æœå‹™

#### 2. é€£æ¥å¤±æ•—

**ç—‡ç‹€**:
```
âŒ OpenAI é€£æ¥éŒ¯èª¤
```

**è§£æ±ºæ–¹æ¡ˆ**:
1. é©—è­‰ API Key æœ‰æ•ˆæ€§
2. æª¢æŸ¥ OpenAI æœå‹™ç‹€æ…‹
3. ç¢ºèªç¶²è·¯é€£æ¥
4. æª¢æŸ¥ API é¡åº¦

#### 3. é€Ÿç‡é™åˆ¶

**ç—‡ç‹€**:
```
âŒ OpenAI é€Ÿç‡é™åˆ¶
```

**è§£æ±ºæ–¹æ¡ˆ**:
1. æ¸›å°‘è«‹æ±‚é »ç‡
2. å¯¦æ–½è«‹æ±‚ä½‡åˆ—
3. å‡ç´š OpenAI æ–¹æ¡ˆ
4. ä½¿ç”¨å¿«å–

---

## ğŸ“ˆ å¾ŒçºŒå„ªåŒ–æ–¹å‘

### çŸ­æœŸ (1-2 é€±)

- [ ] å¯¦æ–½è«‹æ±‚å¿«å–ç­–ç•¥
- [ ] æ·»åŠ é‡è©¦æ©Ÿåˆ¶
- [ ] å„ªåŒ– Prompt æ¨¡æ¿
- [ ] æ·»åŠ æ›´å¤šæ¸¬è©¦æ¡ˆä¾‹

### ä¸­æœŸ (1 å€‹æœˆ)

- [ ] A/B æ¸¬è©¦ä¸åŒæ¨¡å‹
- [ ] å¯¦æ–½ç”¨æˆ¶åé¥‹æ”¶é›†
- [ ] å„ªåŒ–æˆæœ¬ç›£æ§å„€è¡¨æ¿
- [ ] æ·»åŠ æ¨™ç±¤è³ªé‡è©•ä¼°

### é•·æœŸ (3 å€‹æœˆ)

- [ ] å¯¦æ–½æ™ºèƒ½å¿«å–ç­–ç•¥
- [ ] æ·»åŠ å€‹æ€§åŒ–æ¨è–¦
- [ ] å¤šèªè¨€æ”¯æ´
- [ ] æ©Ÿå™¨å­¸ç¿’æ¨¡å‹å¾®èª¿

---

## ğŸ“ æ”¯æ´è³‡æº

### æ–‡æª”

- [Zeabur é…ç½®æŒ‡å—](./GPT5_NANO_ZEABUR_CONFIG.md)
- [OpenAI æ¨¡å‹æ¯”è¼ƒ](./OPENAI_MODEL_COMPARISON.md)
- [LLM æ•´åˆæ–¹æ¡ˆ](./LLM_INTEGRATION_OPTIONS.md)
- [å°ˆæ¡ˆ README](../../README.md)

### å¤–éƒ¨è³‡æº

- [OpenAI API æ–‡æª”](https://platform.openai.com/docs)
- [GPT-5 å®šåƒ¹](https://openai.com/pricing)
- [Zeabur æ–‡æª”](https://zeabur.com/docs)

### è¯ç¹«æ–¹å¼

- GitHub Issues
- åœ˜éšŠ Discord
- Email æ”¯æ´

---

## ğŸŠ ç¸½çµ

### å®Œæˆçš„æ”¹é€²

1. âœ… **é…ç½®ç³»çµ±** - çµ±ä¸€ã€é¡å‹å®‰å…¨çš„é…ç½®ç®¡ç†
2. âœ… **æ™ºèƒ½æ—¥èªŒ** - è©³ç´°çš„è¨ºæ–·å’Œè¿½è¹¤ä¿¡æ¯
3. âœ… **Prompt å„ªåŒ–** - å°ˆæ¥­çš„æ¨™ç±¤æ¨è–¦æç¤ºè©
4. âœ… **æˆæœ¬ç›£æ§** - å¯¦æ™‚æˆæœ¬è¨ˆç®—å’Œé ä¼°
5. âœ… **éŒ¯èª¤è™•ç†** - åˆ†é¡ã€è¨ºæ–·å’Œå»ºè­°
6. âœ… **æ¸¬è©¦å·¥å…·** - å®Œæ•´çš„æ¸¬è©¦å¥—ä»¶
7. âœ… **æ–‡æª”å®Œå–„** - è©³ç´°çš„é…ç½®å’Œä½¿ç”¨æŒ‡å—

### ç³»çµ±ç‹€æ…‹

- **ç©©å®šæ€§**: â­â­â­â­â­ (5/5)
- **å¯é æ€§**: â­â­â­â­â­ (5/5)
- **å¯ç¶­è­·æ€§**: â­â­â­â­â­ (5/5)
- **æ–‡æª”å®Œæ•´åº¦**: â­â­â­â­â­ (5/5)
- **æˆæœ¬æ•ˆç›Š**: â­â­â­â­â­ (5/5)

### å»ºè­°ä¸‹ä¸€æ­¥

1. ğŸš€ åœ¨ Zeabur ä¸Šé…ç½®ç’°å¢ƒè®Šæ•¸
2. âœ… é‹è¡Œé…ç½®æ¸¬è©¦ç«¯é»
3. ğŸ§ª ä½¿ç”¨æ¸¬è©¦è…³æœ¬é©—è­‰
4. ğŸ“Š ç›£æ§æˆæœ¬å’Œæ•ˆèƒ½
5. ğŸ”„ æ”¶é›†ç”¨æˆ¶åé¥‹

---

**å„ªåŒ–å®Œæˆæ—¥æœŸ**: 2025-10-20  
**ç‰ˆæœ¬**: v2.1.0  
**ç‹€æ…‹**: âœ… ç”Ÿç”¢å°±ç·’  
**ç¶­è­·è€…**: Prompt-Scribe Team

ğŸ‰ **æ­å–œï¼GPT-5 Nano æœå‹™å·²å®Œå…¨å„ªåŒ–ä¸¦æº–å‚™å¥½éƒ¨ç½²ï¼**

