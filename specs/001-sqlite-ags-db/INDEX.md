# ğŸ“ Specs 001: SQLite to Supabase æ–‡æª”ç´¢å¼•

**å°ˆæ¡ˆ**: SQLite è³‡æ–™é·ç§»è‡³ Supabase + API é–‹ç™¼  
**å»ºç«‹æ—¥æœŸ**: 2025-01-14  
**ç‰ˆæœ¬**: 2.0

---

## ğŸ“‹ å¿«é€Ÿå°è¦½

### ğŸ¯ **æˆ‘æ‡‰è©²çœ‹å“ªå€‹æª”æ¡ˆï¼Ÿ**

**å¦‚æœæ‚¨æƒ³è¦...**

| éœ€æ±‚ | æª”æ¡ˆä½ç½® | èªªæ˜ |
|------|----------|------|
| **äº†è§£å°ˆæ¡ˆè¦æ ¼** | `spec.md` | å®Œæ•´çš„åŠŸèƒ½è¦æ ¼æ–‡ä»¶ |
| **äº†è§£è³‡æ–™æ¨¡å‹** | `data-model.md` | è³‡æ–™åº«çµæ§‹å’Œé—œä¿‚ |
| **æŸ¥çœ‹ API è¦æ ¼** | `contracts/api_endpoints_llm_optimized.yaml` | æœ€æ–°çš„ LLM å‹å¥½ API è¦æ ¼ â­ |
| **é–‹å§‹ API é–‹ç™¼** | `current/API_OPTIMIZATION_QUICKSTART.md` | API é–‹ç™¼å¿«é€Ÿé–‹å§‹æŒ‡å— â­ |
| **æŸ¥çœ‹é–‹ç™¼è¨ˆç•«** | `current/plan_api_optimization.md` | æœ€æ–°çš„ API é–‹ç™¼è¨ˆç•« â­ |
| **æŸ¥çœ‹ä»»å‹™æ¸…å–®** | `current/tasks_api_optimization.md` | è©³ç´°çš„é–‹ç™¼ä»»å‹™ï¼ˆ18 å€‹ä»»å‹™ï¼‰â­ |
| **äº†è§£æŠ€è¡“æ±ºç­–** | `current/research_api_optimization.md` | æŠ€è¡“ç ”ç©¶å’Œæ±ºç­–åˆ†æ â­ |
| **æŸ¥çœ‹è¨ˆç•«ç¸½çµ** | `current/API_OPTIMIZATION_SUMMARY.md` | API å„ªåŒ–è¨ˆç•«ç¸½çµ â­ |
| **æŸ¥çœ‹èˆŠç‰ˆè¨ˆç•«** | `archive/v1-migration-only/` | åƒ…è³‡æ–™é·ç§»çš„åŸå§‹è¨ˆç•« |

---

## ğŸ“‚ ç›®éŒ„çµæ§‹

```
specs/001-sqlite-ags-db/
â”‚
â”œâ”€â”€ ğŸ“„ INDEX.md                      â† æœ¬æª”æ¡ˆï¼ˆå°è¦½ç´¢å¼•ï¼‰
â”œâ”€â”€ ğŸ“„ README.md                     â† å°ˆæ¡ˆæ¦‚è¿°
â”œâ”€â”€ ğŸ“„ spec.md                       â† åŠŸèƒ½è¦æ ¼ï¼ˆä¸»è¦æ ¼ï¼‰
â”œâ”€â”€ ğŸ“„ data-model.md                 â† è³‡æ–™æ¨¡å‹
â”œâ”€â”€ ğŸ“„ .env                          â† ç’°å¢ƒé…ç½®ï¼ˆä¸è¿½è¹¤ï¼‰
â”‚
â”œâ”€â”€ ğŸ“ current/                      â† ç•¶å‰ç‰ˆæœ¬æ–‡æª”ï¼ˆAPI å„ªåŒ–ï¼‰â­
â”‚   â”œâ”€â”€ plan_api_optimization.md           (é–‹ç™¼è¨ˆç•«)
â”‚   â”œâ”€â”€ research_api_optimization.md       (æŠ€è¡“ç ”ç©¶)
â”‚   â”œâ”€â”€ tasks_api_optimization.md          (ä»»å‹™æ¸…å–®)
â”‚   â”œâ”€â”€ API_OPTIMIZATION_QUICKSTART.md     (å¿«é€Ÿé–‹å§‹)
â”‚   â””â”€â”€ API_OPTIMIZATION_SUMMARY.md        (è¨ˆç•«ç¸½çµ)
â”‚
â”œâ”€â”€ ğŸ“ contracts/                    â† API è¦æ ¼å’Œè³‡æ–™åº« Schema
â”‚   â”œâ”€â”€ database_schema.sql              (è³‡æ–™åº«çµæ§‹)
â”‚   â”œâ”€â”€ api_endpoints.yaml               (èˆŠç‰ˆ API è¦æ ¼)
â”‚   â””â”€â”€ api_endpoints_llm_optimized.yaml (æ–°ç‰ˆ LLM å‹å¥½ API) â­
â”‚
â”œâ”€â”€ ğŸ“ checklists/                   â† æª¢æŸ¥æ¸…å–®
â”‚   â””â”€â”€ requirements.md
â”‚
â””â”€â”€ ğŸ“ archive/                      â† æ­·å²ç‰ˆæœ¬æ­¸æª”
    â””â”€â”€ v1-migration-only/            â† V1: åƒ…è³‡æ–™é·ç§»è¨ˆç•«
        â”œâ”€â”€ plan.md                      (åŸå§‹é–‹ç™¼è¨ˆç•«)
        â”œâ”€â”€ research.md                  (åŸå§‹æŠ€è¡“ç ”ç©¶)
        â”œâ”€â”€ tasks.md                     (åŸå§‹ä»»å‹™æ¸…å–®)
        â”œâ”€â”€ PLANNING_COMPLETE.md         (åŸå§‹è¦åŠƒå®Œæˆå ±å‘Š)
        â””â”€â”€ quickstart.md                (åŸå§‹å¿«é€Ÿé–‹å§‹)
```

---

## ğŸ¯ ç‰ˆæœ¬èªªæ˜

### **V1: è³‡æ–™é·ç§»å°ˆæ¡ˆ**ï¼ˆå·²å®Œæˆ âœ…ï¼‰
**æ™‚é–“**: 2025-10-08 ~ 2025-01-14  
**ç¯„åœ**: SQLite â†’ Supabase è³‡æ–™é·ç§»  
**æˆæœ**: 140,782 ç­†æ¨™ç±¤æˆåŠŸé·ç§»  
**æ–‡æª”ä½ç½®**: `archive/v1-migration-only/`

**æ ¸å¿ƒæ–‡æª”**:
- `plan.md` - é·ç§»é–‹ç™¼è¨ˆç•«
- `research.md` - é·ç§»æŠ€è¡“ç ”ç©¶
- `tasks.md` - é·ç§»ä»»å‹™æ¸…å–®ï¼ˆT001-T014ï¼‰
- `quickstart.md` - é·ç§»å¿«é€Ÿé–‹å§‹
- `PLANNING_COMPLETE.md` - è¦åŠƒå®Œæˆå ±å‘Š

**ç‹€æ…‹**: âœ… å·²å®Œæˆï¼Œå·²æ­¸æª”

---

### **V2: API å„ªåŒ–å°ˆæ¡ˆ**ï¼ˆç•¶å‰ â­ï¼‰
**æ™‚é–“**: 2025-01-14 ~  
**ç¯„åœ**: LLM å‹å¥½çš„ API è¨­è¨ˆå’Œå¯¦ä½œ  
**ç›®æ¨™**: å»ºç«‹ä¸‰å±¤ç´š APIï¼Œå„ªå…ˆé—œéµå­—æœå°‹  
**æ–‡æª”ä½ç½®**: `current/`

**æ ¸å¿ƒæ–‡æª”**:
- `plan_api_optimization.md` - API é–‹ç™¼è¨ˆç•«
- `research_api_optimization.md` - API æŠ€è¡“ç ”ç©¶
- `tasks_api_optimization.md` - API ä»»å‹™æ¸…å–®ï¼ˆT101-T503ï¼‰
- `API_OPTIMIZATION_QUICKSTART.md` - API å¿«é€Ÿé–‹å§‹
- `API_OPTIMIZATION_SUMMARY.md` - API è¨ˆç•«ç¸½çµ

**ç‹€æ…‹**: â³ é€²è¡Œä¸­

---

## ğŸ“š ä¸åŒç‰ˆæœ¬çš„å·®ç•°

### V1 vs V2 å°æ¯”

| é¢å‘ | V1 (è³‡æ–™é·ç§») | V2 (API å„ªåŒ–) |
|------|---------------|---------------|
| **ç„¦é»** | è³‡æ–™é·ç§» | API é–‹ç™¼ |
| **ä»»å‹™ç¯„åœ** | T001-T014 | T101-T503 |
| **ä¸»è¦æŠ€è¡“** | Python é·ç§»è…³æœ¬ | FastAPI + LLM æ•´åˆ |
| **äº¤ä»˜ç‰©** | Supabase è³‡æ–™åº« | LLM å‹å¥½çš„ API |
| **ç‹€æ…‹** | âœ… å®Œæˆ | â³ è¦åŠƒå®Œæˆï¼Œå¾…å¯¦ä½œ |
| **æ–‡æª”ä½ç½®** | `archive/v1-migration-only/` | `current/` |

### ä¿ç•™åœ¨æ ¹ç›®éŒ„çš„å…±ç”¨æ–‡æª”

é€™äº›æ–‡æª”å°å…©å€‹ç‰ˆæœ¬éƒ½é©ç”¨ï¼š
- `spec.md` - æ•´é«”åŠŸèƒ½è¦æ ¼
- `data-model.md` - è³‡æ–™æ¨¡å‹ï¼ˆé·ç§»å’Œ API éƒ½éœ€è¦ï¼‰
- `README.md` - å°ˆæ¡ˆæ¦‚è¿°
- `contracts/` - API è¦æ ¼å’Œè³‡æ–™åº« Schema

---

## ğŸ” æ–‡æª”æŸ¥æ‰¾æŒ‡å—

### æŸ¥çœ‹ç•¶å‰é–‹ç™¼è¨ˆç•«
```bash
# API é–‹ç™¼è¨ˆç•«
cat specs/001-sqlite-ags-db/current/plan_api_optimization.md

# API ä»»å‹™æ¸…å–®
cat specs/001-sqlite-ags-db/current/tasks_api_optimization.md

# API å¿«é€Ÿé–‹å§‹
cat specs/001-sqlite-ags-db/current/API_OPTIMIZATION_QUICKSTART.md
```

### æŸ¥çœ‹æ­·å²è³‡æ–™é·ç§»è¨ˆç•«
```bash
# é·ç§»è¨ˆç•«
cat specs/001-sqlite-ags-db/archive/v1-migration-only/plan.md

# é·ç§»ä»»å‹™
cat specs/001-sqlite-ags-db/archive/v1-migration-only/tasks.md
```

### æŸ¥çœ‹å…±ç”¨è¦æ ¼
```bash
# åŠŸèƒ½è¦æ ¼
cat specs/001-sqlite-ags-db/spec.md

# è³‡æ–™æ¨¡å‹
cat specs/001-sqlite-ags-db/data-model.md

# API è¦æ ¼ï¼ˆæœ€æ–°ï¼‰
cat specs/001-sqlite-ags-db/contracts/api_endpoints_llm_optimized.yaml
```

---

## ğŸ¯ å·¥ä½œæµç¨‹å»ºè­°

### é–‹å§‹ API é–‹ç™¼æ™‚

**æ­¥é©Ÿ 1**: é–±è®€ç•¶å‰æ–‡æª”
```
1. current/API_OPTIMIZATION_SUMMARY.md       (å¿«é€Ÿäº†è§£)
2. current/plan_api_optimization.md          (è©³ç´°è¨ˆç•«)
3. current/tasks_api_optimization.md         (ä»»å‹™æ¸…å–®)
4. current/API_OPTIMIZATION_QUICKSTART.md    (é–‹å§‹å¯¦ä½œ)
```

**æ­¥é©Ÿ 2**: åƒè€ƒè¦æ ¼å’Œåˆç´„
```
1. spec.md                                    (æ•´é«”è¦æ ¼)
2. contracts/api_endpoints_llm_optimized.yaml (API è¦æ ¼)
3. data-model.md                              (è³‡æ–™çµæ§‹)
```

**æ­¥é©Ÿ 3**: é–‹å§‹é–‹ç™¼
```
æŒ‰ç…§ tasks_api_optimization.md ä¸­çš„ä»»å‹™é †åºï¼š
T101 â†’ T102 â†’ T103 â†’ ...
```

### åƒè€ƒæ­·å²è³‡æ–™é·ç§»ç¶“é©—æ™‚

```
æŸ¥çœ‹ archive/v1-migration-only/ ä¸‹çš„æ–‡æª”
äº†è§£é·ç§»éç¨‹çš„æ±ºç­–å’Œç¶“é©—
```

---

## ğŸ“Š æª”æ¡ˆåˆ†é¡ç¸½çµ

### ç•¶å‰æ´»èºæ–‡æª”ï¼ˆ7 å€‹ï¼‰
```
current/                         (5 å€‹ API ç›¸é—œ)
spec.md                          (1 å€‹ä¸»è¦æ ¼)
data-model.md                    (1 å€‹è³‡æ–™æ¨¡å‹)
```

### å…±ç”¨è³‡æºï¼ˆ4 å€‹ï¼‰
```
contracts/                       (3 å€‹è¦æ ¼æª”æ¡ˆ)
checklists/                      (1 å€‹æª¢æŸ¥æ¸…å–®)
```

### æ­·å²æ­¸æª”ï¼ˆ5 å€‹ï¼‰
```
archive/v1-migration-only/       (5 å€‹é·ç§»ç›¸é—œ)
```

### é…ç½®æª”æ¡ˆï¼ˆ2 å€‹ï¼‰
```
.env                             (ç’°å¢ƒé…ç½®)
README.md                        (æ¦‚è¿°)
```

**ç¸½è¨ˆ**: 18 å€‹æª”æ¡ˆï¼Œçµ„ç¹”æ¸…æ™°

---

## âœ… æ•´ç†åŸå‰‡

### ğŸ¯ **ç•¶å‰ç‰ˆæœ¬** (`current/`)
- æ­£åœ¨é€²è¡Œçš„é–‹ç™¼è¨ˆç•«
- æœ€æ–°çš„æŠ€è¡“æ±ºç­–
- æ´»èºçš„ä»»å‹™æ¸…å–®
- **ä½¿ç”¨é »ç‡**: æ¯å¤©

### ğŸ“¦ **æ­·å²ç‰ˆæœ¬** (`archive/v1-*/`)
- å·²å®Œæˆçš„å°ˆæ¡ˆéšæ®µ
- æ­·å²æ±ºç­–è¨˜éŒ„
- ç¶“é©—æ•™è¨“ç¸½çµ
- **ä½¿ç”¨é »ç‡**: å¶çˆ¾åƒè€ƒ

### ğŸ“„ **å…±ç”¨æ–‡æª”** (æ ¹ç›®éŒ„)
- ä¸éš¨ç‰ˆæœ¬è®ŠåŒ–çš„è¦æ ¼
- è³‡æ–™æ¨¡å‹å’Œçµæ§‹
- API è¦æ ¼åˆç´„
- **ä½¿ç”¨é »ç‡**: ç¶“å¸¸

---

## ğŸš€ ä¸‹ä¸€æ­¥

### é–‹å§‹ API é–‹ç™¼
```bash
# 1. é–±è®€å¿«é€Ÿé–‹å§‹
cat specs/001-sqlite-ags-db/current/API_OPTIMIZATION_QUICKSTART.md

# 2. æŸ¥çœ‹ä»»å‹™æ¸…å–®
cat specs/001-sqlite-ags-db/current/tasks_api_optimization.md

# 3. é–‹å§‹ç¬¬ä¸€å€‹ä»»å‹™
# T101: å»ºç«‹ API å°ˆæ¡ˆçµæ§‹
```

### åƒè€ƒæ–‡æª”æ™‚
```
ç•¶å‰è¨ˆç•«  â†’ current/
æ­·å²ç¶“é©—  â†’ archive/v1-migration-only/
è¦æ ¼åˆç´„  â†’ æ ¹ç›®éŒ„å’Œ contracts/
```

---

## ğŸ“ ç¶­è­·å»ºè­°

### æ–°å¢æ–‡æª”æ™‚
- **æ–°çš„ API ç›¸é—œ**: æ”¾å…¥ `current/`
- **æ–°çš„è¦æ ¼**: æ”¾åœ¨æ ¹ç›®éŒ„
- **å®Œæˆçš„éšæ®µ**: ç§»åˆ° `archive/vX-*/`

### ç‰ˆæœ¬ç®¡ç†
- æ¯å€‹ä¸»è¦éšæ®µå®Œæˆå¾Œï¼Œç§»åˆ° `archive/`
- ä½¿ç”¨æ¸…æ™°çš„ç‰ˆæœ¬å‘½åï¼ˆv1, v2, v3ï¼‰
- ä¿æŒ `current/` ç›®éŒ„ç°¡æ½”

---

## ğŸŠ æ•´ç†å®Œæˆ

**specs/001-sqlite-ags-db/ ç›®éŒ„ç¾åœ¨éå¸¸æ¸…æ™°ï¼**

**çµæ§‹**:
- âœ… ç•¶å‰æ´»èºæ–‡æª”åœ¨ `current/`
- âœ… æ­·å²æ–‡æª”åœ¨ `archive/`
- âœ… å…±ç”¨è¦æ ¼åœ¨æ ¹ç›®éŒ„
- âœ… æ¸…æ™°çš„ç´¢å¼•å’Œå°è¦½

**ä¸‹ä¸€æ­¥**: é–‹å§‹ API é–‹ç™¼ï¼æ‰€æœ‰æ–‡æª”éƒ½å·²æº–å‚™å°±ç·’ï¼ğŸš€
