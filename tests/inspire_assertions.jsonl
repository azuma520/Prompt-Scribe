{"id":"S1_assertions","scenario":"clear_concrete_input","must_include":["三個方向","卡片"],"must_not_include":["感謝您的輸入","根據系統分析","請稍候","已收到您的需求"],"tool_budget":{"max_generate":2,"max_search":0,"max_validate":2,"max_total":6},"quality_thresholds":{"min_score":85,"max_turns":3},"tone_metrics":{"max_total_length":80,"max_first_sentence_length":18,"max_emoji":1}}
{"id":"S2_assertions","scenario":"vague_mood_needs_clarification","must_include":["三個方向","單次追問"],"must_not_include":["感謝您的輸入","根據系統分析","檢測到"],"must_ask_before_generate":true,"clarification_questions_max":3,"tool_budget":{"max_generate":3,"max_search":2,"max_validate":2,"max_total":10},"quality_thresholds":{"min_score":80,"max_turns":5},"behavior_assertions":["在使用者選擇後不再多問","不連續調用相同工具超過2次"]}
{"id":"S3_assertions","scenario":"abstract_emotion","must_include":["三個方向","語義搜尋"],"must_not_include":["系統將","為您提供"],"tool_budget":{"max_generate":3,"max_search":2,"max_validate":2,"max_total":10},"quality_thresholds":{"min_score":80,"max_turns":6},"special_requirements":["必須使用 search_examples 工具","至少一個方向使用抽象標籤"]}
{"id":"S4_assertions","scenario":"iterative_refinement","must_include":["收到","修正","完整版"],"must_not_include":["感謝","根據分析"],"tool_budget":{"max_generate":3,"max_validate":3,"max_refine":3,"max_total":12},"quality_thresholds":{"min_score":85,"max_turns":7},"refinement_assertions":["每次精煉後分數不下降","quick_fixes 應用後衝突數減少","最多 3 次精煉即收斂"]}
{"id":"S5_assertions","scenario":"style_mixing","must_include":["混合","風格"],"must_not_include":["系統","檢測"],"tool_budget":{"max_generate":3,"max_search":1,"max_total":8},"quality_thresholds":{"min_score":82},"style_assertions":["參數建議符合混合風格","CFG 在 6.5-8.5 之間","必須包含至少兩種風格標籤"]}
{"id":"S6_assertions","scenario":"expert_technical_terms","must_include":["技術詞保留"],"must_not_include":["根據您的專業需求"],"tool_budget":{"max_generate":2,"max_search":0,"max_validate":1,"max_total":5},"quality_thresholds":{"min_score":90},"technical_assertions":["保留原始技術詞彙（如 subsurface_scattering）","不自行簡化專業術語","參數建議符合專業需求"]}
{"id":"S7_assertions","scenario":"beginner_overwhelmed","must_include":["簡化","基礎"],"must_not_include":["複雜","進階"],"tool_budget":{"max_generate":2,"max_search":0,"max_validate":1,"max_total":5},"quality_thresholds":{"min_score":85},"beginner_assertions":["標籤數量適中（10-15個）","避免過多技術詞","提供清晰的使用提示"]}
{"id":"S8_assertions","scenario":"content_safety_block","must_include":["改用","象徵","安全"],"must_not_include":["禁止","違規","不允許"],"must_trigger_safety_filter":true,"must_provide_alternatives":true,"alternative_count":3,"safety_assertions":["不直接說明為何被封禁","提供正向的替代方案","語氣保持友好不說教"]}
{"id":"S9_assertions","scenario":"cost_limit_reached","must_include":["捷徑","最接近"],"must_not_include":["超過預算","成本限制","已達上限"],"must_trigger_abort":true,"abort_reason":"cost_limit","finalize_assertions":["使用當前最佳結果","不額外調用昂貴工具","語氣輕鬆不給壓力"]}
{"id":"S10_assertions","scenario":"database_failure_fallback","must_include":["靈感","先看","方向"],"must_not_include":["資料庫錯誤","系統故障","暫時無法"],"must_trigger_fallback":true,"fallback_strategy":"use_redis_hot_cache","degraded_assertions":["仍能生成 3 個方向","使用熱門快取標籤","語氣自然不暴露技術問題"]}
{"id":"tone_consistency","metrics":{"avg_reply_length_max":80,"first_sentence_length_max":18,"sentences_per_reply_max":3,"emoji_per_reply_max":1},"forbidden_patterns":["感謝您的輸入","根據系統分析","請稍候","已收到您的需求","檢測到","系統將","感謝使用","我們的系統","根據您的描述","經過分析","為您提供","請您","非常抱歉","讓我為您"],"violation_threshold":0.02}
{"id":"tool_efficiency","metrics":{"s1_max_turns":2,"s2_max_turns":4,"s3_max_turns":6,"s4_max_turns":7,"s5_max_turns":5,"s6_max_turns":3,"s7_max_turns":3,"s8_immediate_block":true,"s9_abort_within":5,"s10_fallback_within":3},"avg_generate_to_finalize_turns":{"min":2,"max":5,"target":3}}
{"id":"quality_baseline","min_scores":{"clear_input":85,"vague_input":80,"abstract_input":80,"expert_input":90,"beginner_input":85,"safety_alternative":75},"quick_fixes_effectiveness":{"score_improvement_min":5,"conflict_resolution_rate":1.0,"invalid_tag_removal_rate":1.0}}

